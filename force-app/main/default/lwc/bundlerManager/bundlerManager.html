<template>
    <div if:true={isMain} class="main-card card overflow-auto">
        <div class="card-body">
            <h5 class="card-title">Bundler Manager</h5>
            <button type="button" class="btn btn-primary" onclick={handleNewBundler}>
                New Bundler
            </button>
            <div for:each={cards} for:item="card" key={card.indexCard}>
                <div class="inner-card border border-success card overflow-auto">
                    <div class="card-header">
                        <div class="d-flex md-3">
                            <div class="mr-auto p-2">
                                <span class="card-name">
                                    <lightning-helptext content={card.nameValue}></lightning-helptext>
                                    {card.nameValue}
                                </span>
                            </div>
                            <div class="p-2">
                                <lightning-button-icon
                                    name={card.indexCard}
                                    icon-name="utility:new"
                                    variant="brand"
                                    onclick={handleAddBox}>
                                </lightning-button-icon>
                            </div>
                            <div class="p-2">
                                <lightning-button-icon
                                    name={card.indexCard}
                                    icon-name="utility:chevrondown"
                                    variant="brand-outline"
                                    onclick={handleToggleBox}>
                                </lightning-button-icon>
                            </div>
                        </div>
                    </div>
                    <div class={card.boxStyle}>
                        <div if:true={card.boxCard} id={card.indexCard} class="box-list row justify-content-md-left d-flex flex-wrap">
                            <div for:each={card.boxes} for:item="box" key={box.boxId}>
                                <div class="box-elements border border-primary card card-body">
                                    <div draggable="true" class="box-card-class">
                                        <c-box-card
                                            first-name={box.firstName}
                                            last-name={box.lastName}
                                            phone={box.phone}>
                                        </c-box-card>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div if:true={isModal} class="modal-fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Name</h5>
                    <button type="button" class="close" onclick={handleDismissModal} aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            <div class="modal-body">
                <lightning-input type="text" label="Enter name" name="cardName" onchange={handleInputData}></lightning-input>
            </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick={handleDismissModal}>Close</button>
                    <button type="button" class="btn btn-primary" onclick={handleAddCard}>Save</button>
                </div>
            </div>
        </div>
    </div>
    <div if:true={isInnerModal} class="modal-fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Box data</h5>
                    <button type="button" class="close" onclick={handleDismissModal} aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            <div class="modal-body">
                <lightning-input type="text" label="Enter first name" name="firstName" onchange={handleInputData}></lightning-input>
                <lightning-input type="text" label="Enter last name" name="lastName" onchange={handleInputData}></lightning-input>
                <lightning-input type="text" label="Enter phone" name="phone" onchange={handleInputData}></lightning-input>
            </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick={handleDismissModal}>Close</button>
                    <button type="button" class="btn btn-primary" onclick={handleAddNewBox}>Save</button>
                </div>
            </div>
        </div>
    </div>
</template>